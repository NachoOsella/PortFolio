<header class="site-header sticky top-0 z-50" [class.header-scrolled]="scrolled()">
    <div class="mx-auto flex max-w-6xl items-center justify-between px-6 py-4">
        <a routerLink="/" class="text-lg font-bold tracking-tight text-[var(--fg)]">
            Nacho<span class="text-[var(--accent)]">.</span>dev
        </a>

        <nav class="hidden items-center gap-8 md:flex" aria-label="Primary">
            @for (link of navLinks; track link.path) {
                <a
                    [routerLink]="link.path"
                    #rla="routerLinkActive"
                    routerLinkActive="nav-active"
                    [routerLinkActiveOptions]="{ exact: link.path === '/' }"
                    [attr.aria-current]="rla.isActive ? 'page' : null"
                    class="nav-link"
                >
                    {{ link.label }}
                </a>
            }
        </nav>

        <div class="flex items-center gap-3">
            <a
                href="/assets/resume.pdf"
                download
                class="hidden h-11 items-center gap-2 border border-[var(--border-subtle)] px-4 text-sm font-medium text-[var(--fg)] transition-colors hover:border-[var(--border-strong)] hover:bg-[var(--bg2)] md:inline-flex"
            >
                <lucide-icon [img]="icons.Download" [size]="16" />
                Resume
            </a>

            <button
                (click)="toggleMobileMenu()"
                class="inline-flex h-11 w-11 items-center justify-center border border-[var(--border-subtle)] text-[var(--fg)] transition-colors hover:border-[var(--border-strong)] hover:bg-[var(--bg2)] md:hidden"
                [attr.aria-expanded]="mobileMenuOpen()"
                [attr.aria-controls]="mobileNavId"
                aria-label="Toggle mobile menu"
            >
                <lucide-icon [img]="mobileMenuOpen() ? icons.X : icons.Menu" [size]="18" />
            </button>
        </div>
    </div>

    <div
        class="mobile-backdrop md:hidden"
        [class.mobile-backdrop-open]="mobileMenuOpen()"
        (click)="closeMobileMenu()"
        aria-hidden="true"
    ></div>

    <aside
        [id]="mobileNavId"
        class="mobile-panel md:hidden"
        [class.mobile-panel-open]="mobileMenuOpen()"
        [attr.aria-hidden]="!mobileMenuOpen()"
        aria-label="Mobile navigation"
    >
        <nav class="flex flex-col gap-1 p-4 pt-20">
            @for (link of navLinks; track link.path) {
                <a
                    [routerLink]="link.path"
                    #mobileRla="routerLinkActive"
                    routerLinkActive="nav-active-mobile"
                    [routerLinkActiveOptions]="{ exact: link.path === '/' }"
                    [attr.aria-current]="mobileRla.isActive ? 'page' : null"
                    (click)="closeMobileMenu()"
                    class="inline-flex h-11 items-center px-4 text-base font-medium text-[var(--fg)] transition-colors hover:bg-[var(--bg2)]"
                >
                    {{ link.label }}
                </a>
            }

            <a
                href="/assets/resume.pdf"
                download
                class="mt-4 inline-flex h-11 items-center gap-2 border border-[var(--border-subtle)] px-4 text-sm font-medium text-[var(--fg)] transition-colors hover:border-[var(--border-strong)] hover:bg-[var(--bg2)]"
            >
                <lucide-icon [img]="icons.Download" [size]="16" />
                Download Resume
            </a>
        </nav>
    </aside>
</header>
