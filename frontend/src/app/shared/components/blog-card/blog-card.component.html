<article
    class="blog-card group flex h-full cursor-pointer flex-col overflow-hidden rounded-lg"
    role="link"
    tabindex="0"
    [attr.aria-label]="'Open blog post ' + post().title"
    (click)="onCardClick($event)"
    (keydown)="onCardKeydown($event)"
>
    @if (post().coverImage && !imageFailed()) {
        <div class="aspect-video overflow-hidden bg-[#18181b]">
            <img
                [src]="post().coverImage"
                [alt]="post().title"
                class="h-full w-full object-cover transition-transform duration-300 group-hover:scale-[1.02]"
                (error)="onImageError()"
            />
        </div>
    } @else {
        <div class="pattern-bg flex aspect-video items-center justify-center text-4xl font-bold text-white/10">
            {{ post().title.charAt(0) }}
        </div>
    }

    <div class="flex flex-1 flex-col p-5">
        <h3 class="text-lg font-semibold text-[#fafafa] transition-colors group-hover:text-[#3b82f6]">
            <a [routerLink]="['/blog', post().slug]">{{ post().title }}</a>
        </h3>

        <div class="mt-2 flex flex-wrap items-center gap-4 text-sm text-[#71717a]">
            <span class="flex items-center gap-1.5">
                <lucide-icon [img]="icons.Calendar" [size]="14" />
                {{ post().date | date: 'mediumDate' }}
            </span>
            <span class="flex items-center gap-1.5">
                <lucide-icon [img]="icons.Clock" [size]="14" />
                {{ post().readingTime }}
            </span>
        </div>

        <p class="mt-3 line-clamp-2 text-sm leading-relaxed text-[#71717a]">
            {{ post().excerpt }}
        </p>

        <div class="mt-4 flex flex-wrap gap-2">
            @for (tag of post().tags; track tag) {
                <span
                    class="rounded bg-white/[0.03] px-2 py-0.5 text-xs font-medium text-[#71717a]"
                >
                    {{ tag }}
                </span>
            }
        </div>

        <a
            [routerLink]="['/blog', post().slug]"
            class="mt-5 inline-flex h-9 items-center gap-1 rounded-md border border-white/10 px-4 text-sm font-medium text-[#a1a1aa] transition-colors hover:border-white/20 hover:text-[#fafafa]"
        >
            Read post
            <lucide-icon [img]="icons.ArrowRight" [size]="14" />
        </a>
    </div>
</article>
